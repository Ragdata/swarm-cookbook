#!/usr/bin/env zsh
# shellcheck disable=SC1091
# ==================================================================
# .stack
# ==================================================================
# Swarm Cookbook - Stack Controller
#
# File:         .stack
# Author:       Ragdata
# Date:         29/09/2023
# License:      MIT License
# Copyright:    Copyright Â© 2023 Darren (Ragdata) Poulton
# ==================================================================
# DEPENDENCIES
# ==================================================================

# ==================================================================
# VARIABLES
# ==================================================================

# ==================================================================
# FUNCTIONS
# ==================================================================
# ------------------------------------------------------------------
# init
# ------------------------------------------------------------------
stackInit()
{
	local NODE_ID

	if [[ ! -f "$SWARMDIR"/.env ]]; then
		cp "$SWARMDIR"/.env.dist "$SWARMDIR"/.env
	fi

	source "$SWARMDIR"/.env

	NODE_ID="$(docker info -f '{{.Swarm.NodeID}}')"
}
# ------------------------------------------------------------------
# destroy
# ------------------------------------------------------------------
stackDestroy()
{
	docker stack rm traefik
}
